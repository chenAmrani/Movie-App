
const MovieModel=require('../modules/AppModules') // מייבאת את התיקייה של המודל 
module.exports.getObject=async(req,res)=> // כל מטודה אני מייבאת אותה שאוכל להשתמש דרך האובייקט של המודל נשתמש בכל הפונקציות
{
    const Movie=await MovieModel.find(); // יביא לנו את כל המשימות כמו גט משרת רק פה אנחנו מבקשים מהמודל
    res.send(Movie) //כביכול הלקוח יבקש את כל המשימות והשרת ישלח לו אותם
}

//return a specipic object by ID.
module.exports.getObjectById=async(req,res)=> {
    const movieId = req.params.id;
    const Movie = await MovieModel.findById(movieId);

    res.send(Movie) 
}

//return object ID
module.exports.getObjectId=async(req,res)=> {
    const MovieTitle = req.params.title;
    const Movie = await MovieModel.findOne({ title: MovieTitle });

    res.send(Movie._id); 
}

module.exports.addObject=async(req,res)=> //ליצור אובייקט חדש 
{
    const{_id,title,year,image,actors,genre}=req.body //הלקוח הקליד בקשה כביכול מזין אובייקט שזה משימה חדש 
   MovieModel.create({_id,title,year,image,actors,genre}).then((data)=>{ //כל הפעולות האלה נעשות עי ה המודל שלנו עם מטודות בנויות מראש 
        console.log('adding to a list of movie ');
        console.log(data);
        res.send(data) //השרת ישלח לנו את המשימה החדשה 
    })
}
module.exports.updateObject=async(req,res)=>
{
    const{_id,title,year,image,actors,genre}=req.body; //דיסטרקצר
    MovieModel
    .findByIdAndUpdate(_id,{title,year,image,actors,genre}).then(()=>res.send("update succsess")).catch((err)=>console.log(err));
}
module.exports.deleteObject=async(req,res)=>
{
    const{_id}=req.body;
   MovieModel
    .findByIdAndDelete(_id).then(()=>res.send("DELETE succsess")).catch((err)=>console.log(err));
}

